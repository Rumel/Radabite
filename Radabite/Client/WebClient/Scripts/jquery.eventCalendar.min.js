$.fn.eventCalendar=function(n){function o(n,t){return n.date.toLowerCase()>t.date.toLowerCase()?1:-1}function u(n,u,f){var h=$("<div class='eventsCalendar-slider'><\/div>"),c=$("<div class='eventsCalendar-monthWrap'><\/div>"),v=$("<div class='eventsCalendar-currentTitle'><a href='#' class='monthTitle'><\/a><\/div>"),p=$("<a href='#' class='arrow prev'><span>"+i.txt_prev+"<\/span><\/a><a href='#' class='arrow next'><span>"+i.txt_next+"<\/span><\/a>"),l,y,o,e,s,a;$eventsCalendarDaysList=$("<ul class='eventsCalendar-daysList'><\/ul>");date=new Date;t.wrap.find(".eventsCalendar-slider").size()?t.wrap.find(".eventsCalendar-slider").append(c):(t.wrap.prepend(h),h.append(c));t.wrap.find(".eventsCalendar-monthWrap.currentMonth").removeClass("currentMonth").addClass("oldMonth");c.addClass("currentMonth").append(v,$eventsCalendarDaysList);n==="current"?(day=date.getDate(),h.append(p)):(date=new Date(t.wrap.attr("data-current-year"),t.wrap.attr("data-current-month"),1,0,0,0),day=0,moveOfMonth=1,n==="prev"&&(moveOfMonth=-1),date.setMonth(date.getMonth()+moveOfMonth),l=new Date,date.getMonth()===l.getMonth()&&(day=l.getDate()));var u=date.getFullYear(),w=(new Date).getFullYear(),f=date.getMonth(),b=f+1;if(n!="current"&&r(i.eventsLimit,u,f,!1,n),t.wrap.attr("data-current-month",f).attr("data-current-year",u),v.find(".monthTitle").html(i.monthNames[f]+" "+u),y=32-new Date(u,f,32).getDate(),o=[],i.showDayAsWeeks){if($eventsCalendarDaysList.addClass("showAsWeek"),i.showDayNameInCalendar)for($eventsCalendarDaysList.addClass("showDayNames"),e=0,i.startWeekOnMonday&&(e=1);e<7;e++)o.push('<li class="eventsCalendar-day-header">'+i.dayNamesShort[e]+"<\/li>"),e===6&&i.startWeekOnMonday&&o.push('<li class="eventsCalendar-day-header">'+i.dayNamesShort[0]+"<\/li>");for(dt=new Date(u,f,01),s=dt.getDay(),i.startWeekOnMonday&&(s=dt.getDay()-1),s<0&&(s=6),e=s;e>0;e--)o.push('<li class="eventsCalendar-day empty"><\/li>')}for(dayCount=1;dayCount<=y;dayCount++)a="",day>0&&dayCount===day&&u===w&&(a="today"),o.push('<li id="dayList_'+dayCount+'" rel="'+dayCount+'" class="eventsCalendar-day '+a+'"><a href="#">'+dayCount+"<\/a><\/li>");$eventsCalendarDaysList.append(o.join(""));h.css("height",c.height()+"px")}function s(n){var i=n.length,t=n.charAt(i-1),r;return r=i===2&&n.charAt(0)==="1"?"th":t==="1"?"st":t==="2"?"nd":t==="3"?"rd":"th",n+r}function r(n,r,u,e,o){var n=n||0,r=r||"",e=e||"",u;u=typeof u!="undefined"?u:"";t.wrap.find(".eventsCalendar-loading").fadeIn();i.jsonData?(i.cacheJson=!0,t.eventsJson=i.jsonData,f(t.eventsJson,n,r,u,e,o)):i.cacheJson&&o?f(t.eventsJson,n,r,u,e,o):$.getJSON(i.eventsjson+"?limit="+n+"&year="+r+"&month="+u+"&day="+e,function(i){t.eventsJson=i;f(t.eventsJson,n,r,u,e,o)}).error(function(){c("error getting json: ")});e>""&&(t.wrap.find(".current").removeClass("current"),t.wrap.find("#dayList_"+e).addClass("current"))}function f(n,r,u,f,h,c){directionLeftMove="-="+t.directionLeftMove;eventContentHeight="auto";subtitle=t.wrap.find(".eventsCalendar-list-wrap .eventsCalendar-subtitle");c?(h!=""?subtitle.html(i.txt_SpecificEvents_prev+i.monthNames[f]+" "+s(h)+" "+i.txt_SpecificEvents_after):subtitle.html(i.txt_SpecificEvents_prev+i.monthNames[f]+" "+i.txt_SpecificEvents_after),c==="prev"?directionLeftMove="+="+t.directionLeftMove:(c==="day"||c==="month")&&(directionLeftMove="+=0",eventContentHeight=0)):(subtitle.html(i.txt_NextEvents),eventContentHeight="auto",directionLeftMove="-=0");t.wrap.find(".eventsCalendar-list").animate({opacity:i.moveOpacity,left:directionLeftMove,height:eventContentHeight},i.moveSpeed,function(){var e,s,c,l;t.wrap.find(".eventsCalendar-list").css({left:0,height:"auto"}).hide();e=[];n=$(n).sort(o);n.length&&(s="",i.showDescription||(s="hidden"),c="_self",i.openEventInNewWindow&&(c="_target"),l=0,$.each(n,function(n,o){var g;if(i.jsonDateFormat=="human")var k=o.date.split(" "),a=k[0].split("-"),b=k[1].split(":"),p=a[0],y=parseInt(a[1])-1,w=parseInt(a[2]),nt=parseInt(y)+1,d=b[0],v=b[1],tt=b[2],a=new Date(p,y,w,d,v,tt);else{var a=new Date(parseInt(o.date)),p=a.getFullYear(),y=a.getMonth(),w=a.getDate(),nt=y+1,d=a.getHours()%12==0?12:a.getHours()%12,it=a.getHours()<12?"AM":"PM";v=a.getMinutes()}parseInt(v)<=9&&(v="0"+parseInt(v));(r===0||r>l)&&(f===!1||f==y)&&(h==""||h==w)&&(u==""||u==p)&&(f===!1&&a<new Date||(eventStringDate=nt+"/"+w+"/"+p,g=o.url?'<a href="'+o.url+'" target="'+c+'" class="eventTitle">'+o.title+"<\/a>":'<span class="eventTitle">'+o.title+"<\/span>",e.push('<li id="'+n+'" class="'+o.type+'"><time datetime="'+a+'"><em>'+eventStringDate+"<\/em><small>"+d+":"+v+" "+it+"<\/small><\/time>"+g+'<p class="eventDesc '+s+'">'+o.description+"<\/p><\/li>"),l++));p==t.wrap.attr("data-current-year")&&y==t.wrap.attr("data-current-month")&&t.wrap.find(".currentMonth .eventsCalendar-daysList #dayList_"+parseInt(w)).addClass("dayWithEvents")}));e.length||e.push('<li class="eventsCalendar-noEvents"><p>'+i.txt_noEvents+"<\/p><\/li>");t.wrap.find(".eventsCalendar-loading").hide();t.wrap.find(".eventsCalendar-list").html(e.join(""));t.wrap.find(".eventsCalendar-list").animate({opacity:1,height:"toggle"},i.moveSpeed)});e()}function h(){t.wrap.find(".arrow").click(function(n){var r;n.preventDefault();$(this).hasClass("next")?(u("next"),r="-="+t.directionLeftMove):(u("prev"),r="+="+t.directionLeftMove);t.wrap.find(".eventsCalendar-monthWrap.oldMonth").animate({opacity:i.moveOpacity,left:r},i.moveSpeed,function(){t.wrap.find(".eventsCalendar-monthWrap.oldMonth").remove()})})}function c(n){t.wrap.find(".eventsCalendar-list-wrap").html("<span class='eventsCalendar-loading error'>"+n+" "+i.eventsjson+"<\/span>")}function e(){t.directionLeftMove=t.wrap.width();t.wrap.find(".eventsCalendar-monthWrap").width(t.wrap.width()+"px");t.wrap.find(".eventsCalendar-list-wrap").width(t.wrap.width()+"px")}var i=$.extend({},$.fn.eventCalendar.defaults,n),t={wrap:"",directionLeftMove:"300",eventsJson:{}};this.each(function(){t.wrap=$(this);t.wrap.addClass("eventCalendar-wrap").append("<div class='eventsCalendar-list-wrap'><p class='eventsCalendar-subtitle'><\/p><span class='eventsCalendar-loading'>loading...<\/span><div class='eventsCalendar-list-content'><ul class='eventsCalendar-list'><\/ul><\/div><\/div>");i.eventsScrollable&&t.wrap.find(".eventsCalendar-list-content").addClass("scrollable");e();$(window).resize(function(){e()});u("current");r(i.eventsLimit,!1,!1,!1,!1);h();t.wrap.on("click",".eventsCalendar-day a",function(n){n.preventDefault();var i=t.wrap.attr("data-current-year"),u=t.wrap.attr("data-current-month"),f=$(this).parent().attr("rel");r(!1,i,u,f,"day")});t.wrap.on("click",".monthTitle",function(n){n.preventDefault();var u=t.wrap.attr("data-current-year"),f=t.wrap.attr("data-current-month");r(i.eventsLimit,u,f,!1,"month")})});t.wrap.find(".eventsCalendar-list").on("click",".eventTitle",function(n){var r,u,f;i.showDescription||(n.preventDefault(),r=$(this).parent().find(".eventDesc"),r.find("a").size()||(u=$(this).attr("href"),f=$(this).attr("target"),r.append('<a href="'+u+'" target="'+f+'" class="bt">'+i.txt_GoToEventUrl+"<\/a>")),r.is(":visible")?r.slideUp():(i.onlyOneDescription&&t.wrap.find(".eventDesc").slideUp(),r.slideDown()))})};$.fn.eventCalendar.defaults={eventsjson:"js/events.json",eventsLimit:4,monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],txt_noEvents:"There are no events in this period",txt_SpecificEvents_prev:"",txt_SpecificEvents_after:"events:",txt_next:"next",txt_prev:"prev",txt_NextEvents:"Next events:",txt_GoToEventUrl:"See the event",showDayAsWeeks:!0,startWeekOnMonday:!0,showDayNameInCalendar:!0,showDescription:!1,onlyOneDescription:!0,openEventInNewWindow:!1,eventsScrollable:!1,jsonDateFormat:"timestamp",moveSpeed:500,moveOpacity:.15,jsonData:"",cacheJson:!0};
/*
//# sourceMappingURL=jquery.eventCalendar.min.js.map
*/