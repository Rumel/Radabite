@using Radabite.Models

@{
	ViewBag.Title = "Event";
}

@model EventModel

<br />  
<div class="row">
    <div class="large-8 medium-8 columns">
    	<h3>Title: @Model.Title</h3>
    </div>
    <div class="large-2 medium-2 columns" style="direction:rtl">
        <a class="radius button" data-reveal-id="UpdateEventModal" href="#">Edit</a>
    </div>
    <div class="large-2 medium-2 columns">
        <a class="radius button" data-reveal-id="DeleteEventModal" href="#" style="background-color:rgb(199, 15, 15)">Delete</a>
    </div>
</div>

<div class="row">
    <div class="large-12 medium-12 columns">
        <h4>Description: @Model.Description</h4>
	    <h4>Time: @Model.StartTime - @Model.EndTime</h4>
	    <h4>Location: @Model.LocationName</h4>
        @{if (Model.IsPrivate) 
            { <h5>Privacy: Private</h5> }
        else
            { <h5>Privacy: Public</h5> } }
    </div>
</div>

<br />
<div class="row">
    <div class="large-4 medium-4 columns">
        <div class="panel">
            <h4>Friends</h4>
            <a class="radius button" data-reveal-id="InviteModal" href="#">Invite Friends</a>
        </div>
    </div>
    <div class="large-8 medium-8 columns">
        <div class="panel">
            <form method="post" action="/Event/AddPost">
                <input type="text" name="message" placeholder="Enter a Message to post!" />
                <input type="submit" value="Post" />
            </form>
        </div>
        @foreach (var post in Model.Posts)
        {
        <div class="panel">
            <div class ="row">
                <div class="large-3 medium-3 columns">
                   <img src="@post.From.PhotoLink" alt="" />
                </div>
                <div class="large-9 medium 9 columns">
                    <p>
                        <a href="/Home/UserProfile?userid=@post.From.Id">@post.From.DisplayName</a>
                    </p>
                    <p>@post.Message</p>
                    <div class="row">
                        <div class="large-3 medium-3 columns">
                            Likes: @post.Likes
                        </div>
                        <div class="large-9 medium-9 columns" style="direction:rtl">
                            Sent at: @post.SendTime
                        </div>
                    </div>
                </div>
            </div>
       </div>
        }
    </div>
</div>

@Html.Partial("~/Client/WebClient/Views/Shared/_UpdateEventModal.cshtml", Model)

<div id="DeleteEventModal" class="reveal-modal small" data-reveal>
    <h4>Are you sure you want to delete this event?</h4>
    <br />
    <div class="row">
        <div class="medium-12 medium-centered columns">
            @using (Html.BeginForm("Delete", "Event", Model, FormMethod.Post))
            {
                <input type="submit" value="Yes, Delete" />
            }
            @*<a class="radius button" id="confirm-delete" href="#" style="background-color:rgb(199, 15, 15)">Yes, Delete!</a>
            <a class="radius button" id="cancel-delete" href="#">No, Keep my Event!</a>*@
        </div>
    </div>
    
    <a class="close-reveal-modal">&#215;</a>
</div>

<div id="InviteModal" class="reveal-modal small" data-reveal>
    @Html.Action("_InviteFriends", "Event", new { u = User.Identity.Name })
    <a class="close-reveal-modal">&#215;</a>
</div>

<script type="text/javascript">
    $(document).on('click', '#cancel-delete', function () {
        $('#DeleteEventModal').foundation('reveal', 'close');
    });
    /*$(document).on('click', '#confirm-delete', function () {
        $('#DeleteEventModal').foundation('reveal', 'close');
        $.post("Url.Action("Delete")", function (data) {
            // do stuff;
        });
    });*/
</script>
